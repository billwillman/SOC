if _MOE.IsDS then
    require("LuaPanda").start("127.0.0.1", 8818)
else
    require("LuaPanda").start("127.0.0.1", 8819)
end

local function InitCSGlobalVars()
    _MOE.class = require("Common.BaseClass") -- class框架
    _MOE.NetManager = CS.NsTcpClient.NetManager
    _MOE.ResourceManager = CS.ResourceMgr
end

local function CreateApplication()
    local appClass
    if _MOE.IsDS then
        appClass = require("DS.DSApp")
    else
        appClass = require("Client.ClientApp")
    end
    if not appClass then
        _MOE.Logger.LogError("[CreateApplication] not found appClass~!")
        return
    end
    _MOE.GameApp = appClass.New()
end

--- 主函数
function Main()
    _MOE.Logger.Log("[xlua] Main Start...")
    -- 设置调试Lua Panda调试
    InitCSGlobalVars()
    CreateApplication()
    -- 初始化Model
    require("ModelInit")
end

--- 游戏结束
function QuitGame()
    if _MOE.GameApp then
        _MOE.GameApp:Quit()
    end
end
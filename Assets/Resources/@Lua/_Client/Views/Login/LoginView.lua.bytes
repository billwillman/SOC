local LoginView = _MOE.class("LoginView", _MOE.BaseViewClass)

function LoginView:RegisterEvents()
    self:AddButtonClick(self.bp.BtnSubmit, self.OnBtnSubmit)
end

function LoginView:RegisterCustomEvents()
    self:RegisterCustomEvent(_MOE.ClientEvents.Client_RepServerList, self._OnRepServerList)
end

function LoginView:_OnRepServerList(serverList)
    print("[LoginView] _OnRepServerList")
end

function LoginView:OnBtnSubmit()
    print("OnBtnSubmit")
    local netModel = _MOE.GameApp:GetModel("NetClientModel")
    if netModel then
        netModel:ConnectGSServer()
    end
end

function LoginView:UnRegisterEvents()
    self:ClearUIEvents()
end

function LoginView:OnOpen()
    self:RegisterCustomEvents()
    self:RegisterEvents()
    local netModel = _MOE.GameApp:GetModel("NetClientModel")
    if netModel then
        netModel:ReqHttpServerListData() -- 请求服务器列表
    end
end

function LoginView:OnClose()
    self:UnRegisterEvents()
end

return LoginView